<build description="Building" revision="${revision}" path="${path}"
    xmlns:python="http://bitten.cmlenz.net/tools/python"
    xmlns:sh="http://bitten.cmlenz.net/tools/sh"
    xmlns:svn="http://bitten.cmlenz.net/tools/svn">

  <step id="Checkout" description="Get source code from svn">
    <sh:exec executable="echo" args="Svn checkout of the project"/>
    <sh:exec executable="svn" args="co http://bitten.edgewall.org/svn/${path} . -r ${revision} --quiet"/>
  </step>

  <step id="Buid" description="Build package and source distribution">
    <sh:exec executable="echo" args="Building bytecode"/>
    <python:distutils command="build"/>
    <sh:exec executable="echo" args="Building egg package"/>
    <python:distutils command="bdist_egg"/>
    <sh:exec executable="echo" args="Create source package"/>
    <python:distutils command="sdist"/>
  </step>

  <step id="Test" description="Run unittests" onerror="ignore">
    <sh:exec executable="echo" args="Run unittests"/>
      <python:distutils command="unittest" options="
      --xml-output build/test-results.xml
      --coverage-summary build/test-coverage.txt
      --coverage-dir build/coverage"/>
      <python:unittest file="build/test-results.xml"/>
      <python:trace summary="build/test-coverage.txt"
        coverdir="build/coverage" include="trac*" exclude="*.tests.*"/>
  </step>

  <step id="Pylint" description="Pylint kwalitee check" onerror="ignore">
    <sh:exec executable="pylint" args="--rcfile=pylint.rc project" output="pylint-results.out"/>
    <python:pylint file="pylint-results.out"/>
  </step>

</build>
